//This file is a copy of id5-bootstrap.js
!function(){"use strict";function e(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function t(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,e(i.key),i)}}function n(t,n,r){return(n=e(n))in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function r(e){for(var t=e+"=",n=decodeURIComponent(document.cookie).split(";"),r=0;r<n.length;r++){for(var i=n[r];" "===i.charAt(0);)i=i.substring(1);if(0===i.indexOf(t))return i.substring(t.length,i.length)}return""}function i(e){return(new Date).getTime()+24*e*60*60*1e3}function o(e,t,n){var r="expires="+new Date(i(n)).toUTCString();document.cookie=e+"="+t+";"+r+";path=/"}var u="id5-true-link",a=u+"-refresh",d=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n(this,"trueLinkId",void 0),n(this,"redirected",!1)},(d=[{key:"initTrueLinkId",value:function(e){var t=new URLSearchParams(window.location.search),n=t.get("trueLinkId");if(n)o(u,n,90),o(a,i(7),90),window.history.replaceState(null,null,t.get("trueLinkRedirect")),this.trueLinkId=n,this.redirected=!0;else{var d=r(u),c=r(a),l=(new Date).getTime()>parseInt(c);if(!d||l){var s=window.localStorage.getItem("id5id_privacy"),f=s?JSON.parse(s):null;return f&&!0===f.id5_consent||!0===e?(console.log("ID5TL: Redirecting to TrueLink endpoint"),void(window.location.href="https://id5-sync.com/true-link?location="+encodeURIComponent(window.location.href))):void console.log("ID5TL: Redirection aborted due to consent not being determined yet")}this.trueLinkId=d}return console.log("ID5TL: Returning TrueLink of "+this.trueLinkId),this.trueLinkId}},{key:"getTrueLinkId",value:function(){return this.trueLinkId}},{key:"getTrueLinkInfo",value:function(){return{booted:!0,redirected:this.redirected,id:this.trueLinkId}}}])&&t(e.prototype,d),c&&t(e,c),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,d,c}();window.id5Bootstrap||(window.id5Bootstrap=new d,console.log("ID5TL: Id5 bootstrap loaded"))}();


