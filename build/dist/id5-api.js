/**
 * id5-api.js - The ID5 API is designed to make accessing the ID5 Universal ID simple for publishers and their ad tech vendors. The ID5 Universal ID is a shared, neutral identifier that publishers and ad tech platforms can use to recognise users even in environments where 3rd party cookies are not available. For more information, visit https://id5.io/universal-id.
 * @version v0.8.2
 * @link https://id5.io/
 * @license Apache-2.0
 */
!function(t){var o={};function r(n){if(o[n])return o[n].exports;var e=o[n]={i:n,l:!1,exports:{}};return t[n].call(e.exports,e,e.exports,r),e.l=!0,e.exports}r.m=t,r.c=o,r.d=function(n,e,t){r.o(n,e)||Object.defineProperty(n,e,{configurable:!1,enumerable:!0,get:t})},r.n=function(n){var e=n&&n.__esModule?function(){return n.default}:function(){return n};return r.d(e,"a",e),e},r.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},r.p="",r(r.s=2)}([function(n,e,t){"use strict";function r(n){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(n)}t.d(e,"a",function(){return o});var a=t(1);var o=function(){var t,o={debug:"Boolean",allowID5WithoutConsentApi:"Boolean",cmpApi:"String",consentData:"Object",cookieName:"String",refreshInSeconds:"Number",cookieExpirationInSeconds:"Number",partnerId:"Number",partnerUserId:"String"};function n(){t={debug:"TRUE"===a.getParameterByName("id5_debug").toUpperCase(),allowID5WithoutConsentApi:!1,cmpApi:"iab",consentData:{getConsentData:{consentData:void 0,gdprApplies:void 0},getVendorConsents:{}},cookieName:"id5.1st",refreshInSeconds:7200,cookieExpirationInSeconds:7776e3,partnerId:void 0,partnerUserId:void 0}}return n(),{getConfig:function(){return t},setConfig:function(e){if("object"===r(e))return Object.keys(e).forEach(function(n){a.isA(e[n],o[n])?t[n]=e[n]:a.logError("setConfig options ".concat(n," must be of type ").concat(o[n]," but was ").concat(toString.call(e[n])))}),t;a.logError("setConfig options must be an object")},resetConfig:n}}()},function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),t.d(e,"bind",function(){return C}),e.replaceTokenInString=function(r,n,a){return x(n,function(n,e){n=void 0===n?"":n;var t=a+e.toUpperCase()+a,o=new RegExp(t,"g");r=r.replace(o,n)}),r},e.logMessage=I,e.logInfo=function(){S()&&m&&console.info.apply(console,D(arguments,"INFO:"))},e.logWarn=function(){S()&&y&&console.warn.apply(console,D(arguments,"WARNING:"))},e.logError=w,e.debugTurnedOn=S,e.getParameterByName=function(n){var e=new RegExp("[\\?&]"+n+"=([^&#]*)").exec(window.location.search);return null!==e?decodeURIComponent(e[1].replace(/\+/g," ")):""},e.isA=k,e.isFn=A,e.isStr=E,e.isArray=O,e.isNumber=function(n){return k(n,s)},e.isPlainObject=function(n){return k(n,f)},e.isBoolean=function(n){return k(n,p)},e.isEmpty=j,e._each=x,e._map=function(t,o){if(j(t))return[];if(A(t.map))return t.map(o);var r=[];return x(t,function(n,e){r.push(o(n,e,t))}),r},e.isSafariBrowser=function(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)},e.checkCookieSupport=function(){if(window.navigator.cookieEnabled||document.cookie.length)return!0},e.cookiesAreEnabled=function(){return window.document.cookie="id5.cookieTest",-1!==window.document.cookie.indexOf("id5.cookieTest")},e.getCookie=function(n){var e=window.document.cookie.match("(^|;)\\s*"+n+"\\s*=\\s*([^;]*)\\s*(;|$)");return e?decodeURIComponent(e[2]):null},e.setCookie=function(n,e,t){document.cookie="".concat(n,"=").concat(encodeURIComponent(e)).concat(""!==t?"; expires=".concat(t):"","; path=/")},e.parseQS=T,e.formatQS=U,e.parse=N,e.format=R,e.ajax=function(n,e,t){var o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};try{var r,a=o.method||(t?"POST":"GET"),c=document.createElement("a");c.href=n;var i="object"===l(e)&&null!==e?e:{success:function(){I("xhr success")},error:function(n){w("xhr error",null,n)}};if("function"==typeof e&&(i.success=e),(r=new window.XMLHttpRequest).onreadystatechange=function(){if(r.readyState===P){var n=r.status;200<=n&&n<300||304===n?i.success(r.responseText,r):i.error(r.statusText,r)}},r.ontimeout=function(){w("  xhr timeout after ",r.timeout,"ms")},"GET"===a&&t){var s=N(n,o);u(s.search,t),n=R(s)}r.open(a,n,!0),o.withCredentials&&(r.withCredentials=!0),x(o.customHeaders,function(n,e){r.setRequestHeader(e,n)}),o.preflight&&r.setRequestHeader("X-Requested-With","XMLHttpRequest"),r.setRequestHeader("Content-Type",o.contentType||"text/plain"),"POST"===a&&t?r.send(t):r.send()}catch(n){w("xhr construction",n)}};var o=t(0);function u(){return(u=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o])}return n}).apply(this,arguments)}function l(n){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(n)}function a(n,e){return function(n){if(Array.isArray(n))return n}(n)||function(n,e){var t=[],o=!0,r=!1,a=void 0;try{for(var c,i=n[Symbol.iterator]();!(o=(c=i.next()).done)&&(t.push(c.value),!e||t.length!==e);o=!0);}catch(n){r=!0,a=n}finally{try{o||null==i.return||i.return()}finally{if(r)throw a}}return t}(n,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var r="Array",c="String",i="Function",s="Number",f="Object",p="Boolean",d=Object.prototype.toString,g=Boolean(window.console),h=Boolean(g&&window.console.log),m=Boolean(g&&window.console.info),y=Boolean(g&&window.console.warn),v=Boolean(g&&window.console.error),b={},C=function(n,e){return e}.bind(null,1,b)()===b?Function.prototype.bind:function(n){var e=this,t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(n,t.concat(Array.prototype.slice.call(arguments)))}};function I(){S()&&h&&console.log.apply(console,D(arguments,"MESSAGE:"))}function w(){S()&&v&&console.error.apply(console,D(arguments,"ERROR:"))}function D(n,e){return n=[].slice.call(n),e&&n.unshift(e),n}function S(){return!!o.a.getConfig("debug")}function k(n,e){return d.call(n)==="[object "+e+"]"}function A(n){return k(n,i)}function E(n){return k(n,c)}function O(n){return k(n,r)}function j(n){if(!n)return!0;if(O(n)||E(n))return!(0<n.length);for(var e in n)if(hasOwnProperty.call(n,e))return!1;return!0}function x(n,e){if(!j(n)){if(A(n.forEach))return n.forEach(e,this);var t=0,o=n.length;if(0<o)for(;t<o;t++)e(n[t],t,n);else for(t in n)hasOwnProperty.call(n,t)&&e.call(this,n[t],t)}}function T(n){return n?n.replace(/^\?/,"").split("&").reduce(function(n,e){var t=a(e.split("="),2),o=t[0],r=t[1];return/\[\]$/.test(o)?(n[o=o.replace("[]","")]=n[o]||[],n[o].push(r)):n[o]=r||"",n},{}):{}}function U(n){return Object.keys(n).map(function(e){return Array.isArray(n[e])?n[e].map(function(n){return"".concat(e,"[]=").concat(n)}).join("&"):"".concat(e,"=").concat(n[e])}).join("&")}function N(n,e){var t=document.createElement("a");e&&"noDecodeWholeURL"in e&&e.noDecodeWholeURL?t.href=n:t.href=decodeURIComponent(n);var o=e&&"decodeSearchAsString"in e&&e.decodeSearchAsString;return{href:t.href,protocol:(t.protocol||"").replace(/:$/,""),hostname:t.hostname,port:+t.port,pathname:t.pathname.replace(/^(?!\/)/,"/"),search:o?t.search:T(t.search||""),hash:(t.hash||"").replace(/^#/,""),host:t.host||window.location.host}}function R(n){return(n.protocol||"http")+"://"+(n.host||n.hostname+(n.port?":".concat(n.port):""))+(n.pathname||"")+(n.search?"?".concat(U(n.search||"")):"")+(n.hash?"#".concat(n.hash):"")}var P=4},function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),t.d(e,"ID5",function(){return p});var o=t(3),r=t(0),u=t(1),l=t(4),f=t(5),p=Object(o.a)();p.loaded=!0,p.initialized=!1,p.init=function(n){try{u.logInfo("Invoking ID5.init",arguments);var a=r.a.setConfig(n);p.userConfig=n,p.config=a,p.initialized=!0;var c=Object(f.a)();u.logInfo("ID5 detected referer is ".concat(c.referer));var i=JSON.parse(u.getCookie(a.cookieName)),e=new Date(+u.getCookie("".concat(a.cookieName,"_last"))),s=0<e.getTime()&&Date.now()-e.getTime()>1e3*a.refreshInSeconds;i?(p.userId=i.ID5ID,u.logInfo("ID5 User ID already available:",i,e,s)):u.logInfo("No ID5 User ID available"),l.b(function(n){if(l.a()){if(u.logInfo("Consent to access local storage and cookies is given"),!i||s){var e=n&&n.gdprApplies?1:0,t=n&&n.gdprApplies?n.consentString:"",o="https://id5-sync.com/g/v1/".concat(a.partnerId,".json"),r={"1puid":p.userId||"",gdpr:e,gdpr_consent:t,rf:c.referer,top:c.reachedTop?1:0,o:"api",v:p.version||""};a.debug&&u.logInfo("Fetching ID5 user ID from:",o,r),u.ajax(o,function(n){var e;if(n)try{if((e=JSON.parse(n)).ID5ID){p.userId=e.ID5ID;var t=new Date(Date.now()+1e3*a.cookieExpirationInSeconds).toUTCString();if(u.setCookie(a.cookieName,n,t),u.setCookie("".concat(a.cookieName,"_last"),Date.now(),t),e.CASCADE_NEEDED){var o="https://id5-sync.com/".concat(a.partnerUserId?"s":"i","/").concat(a.partnerId,"/8.gif");u.logInfo("Opportunities of cascades available:",o,r),u.ajax(o,function(){},{puid:a.partnerUserId},{method:"GET",withCredentials:!0})}}else u.logError("Invalid response from ID5 servers:",n)}catch(n){u.logError(n)}},r,{method:"GET",withCredentials:!0})}}else u.logInfo("No legitimate consent to use ID5",n)})}catch(n){u.logError("Exception catch",n)}},e.default=p},function(n,e,t){"use strict";e.a=function(){return window.ID5},window.ID5=window.ID5||{}},function(n,e,t){"use strict";e.b=function(n){var e=c.a.getConfig();e.allowID5WithoutConsentApi?(a.logError("ID5 is operating in forced consent mode"),n(o)):i[e.cmpApi]?o?n(o):("static"===e.cmpApi&&(a.isPlainObject(c.a.getConfig().consentData)?r=c.a.getConfig().consentData:a.logError("cmpApi: 'static' did not specify consentData.")),i[e.cmpApi].call(this,s,n)):(a.logError("Unknown consent API: ".concat(e.cmpApi)),u(),n(o))},e.a=function(){return!!c.a.getConfig().allowID5WithoutConsentApi||!!o&&("boolean"!=typeof o.gdprApplies||!o.gdprApplies||!!o.consentString&&(!o.vendorData||!o.vendorData.purposeConsents||!1!==o.vendorData.purposeConsents[1]))};var o,r,a=t(1),c=t(0),i={iab:function(n,o){var e,t=function(){var e={};function t(){e.getConsentData&&e.getVendorConsents&&n(e,o)}return{consentDataCallback:function(n){a.logInfo("cmpApi: consentDataCallback"),e.getConsentData=n,t()},vendorConsentsCallback:function(n){a.logInfo("cmpApi: vendorConsentsCallback"),e.getVendorConsents=n,t()}}}();try{e=window.__cmp||window.top.__cmp}catch(n){}a.isFn(e)?(a.logInfo("cmpApi: calling getConsentData & getVendorConsents"),e("getConsentData",null,t.consentDataCallback),e("getVendorConsents",null,t.vendorConsentsCallback)):n(void 0,o)},static:function(n,e){n(r,e)}};function s(n,e){var t=n&&n.getConsentData&&n.getConsentData.gdprApplies;"boolean"==typeof t&&(!0!==t||a.isStr(n.getConsentData.consentData)&&a.isPlainObject(n.getVendorConsents)&&1<Object.keys(n.getVendorConsents).length)?o={consentString:n?n.getConsentData.consentData:void 0,vendorData:n?n.getVendorConsents:void 0,gdprApplies:n?n.getConsentData.gdprApplies:void 0}:(u(),a.logError("CMP returned unexpected value during lookup process.",n)),e(o)}function u(){o=void 0}},function(n,e,t){"use strict";function i(){return(i=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o])}return n}).apply(this,arguments)}t.d(e,"a",function(){return o});var o=function(r){function a(){var n=function(){var e,t=[];do{try{e=e?e.parent:r;try{var n=e===r.top,o={referrer:e.document.referrer||null,location:e.location.href||null,isTop:n};n&&(o=i(o,{canonicalUrl:c(e.document)})),t.push(o)}catch(n){t.push({referrer:null,location:null,isTop:e===r.top})}}catch(n){return t.push({referrer:null,location:null,isTop:!1}),t}}while(e!==r.top);return t}(),e=function(){try{if(!r.location.ancestorOrigins)return;return r.location.ancestorOrigins}catch(n){}}();if(e)for(var t=0,o=e.length;t<o;t++)n[t].ancestor=e[t];return n}function c(n){try{var e=n.querySelector("link[rel='canonical']");if(null!==e)return e.href}catch(n){}return null}return function(){try{var n,e=a(),t=e.length-1,o=null!==e[t].location||0<t&&null!==e[t-1].referrer,r=function(n){var e,t=[],o=null,r=null,a=null,c=null,i=null;for(e=n.length-1;0<=e;e--){try{o=n[e].location}catch(n){}if(o)t.push(o),i||(i=o);else if(0!==e){r=n[e-1];try{a=r.referrer,c=r.ancestor}catch(n){}a?(t.push(a),i||(i=a)):c?(t.push(c),i||(i=c)):t.push(null)}else t.push(null)}return{stack:t,detectedRefererUrl:i}}(e);return e[e.length-1].canonicalUrl&&(n=e[e.length-1].canonicalUrl),{referer:r.detectedRefererUrl,reachedTop:o,numIframes:t,stack:r.stack,canonicalUrl:n}}catch(n){}}}(window)}]),ID5.version="0.8.2";